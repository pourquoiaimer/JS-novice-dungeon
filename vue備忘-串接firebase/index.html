<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>to do list</title>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.1/css/bootstrap.css' />
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        .list-group-item {
            padding: 15px 0px;
            font-size: 18px
        }

        .list-group-item.active {
            background-color: rgb(238, 192, 133);
            color: black;
            font-weight: bold;
            /* border: 1px solid white; */
        }

        .star {
            color: red;
            cursor: pointer;
        }
        .status{
            font-size: 18px;   
        }
    </style>
</head>

<body>
    <div id="app" class="container my-3">
        <div class="col px-0">
            <button class="btn btn-primary mr-2 mb-3 signBtn" @click='signInGoogle'>google登入</button>
            <button class="btn btn-primary mr-2 mb-3 signBtn" @click='signOutGoogle'>google註銷帳號</button>
            <!-- <span class="status" v-for="item in status">登入狀態 : {{item}} </span> -->

            <span class="status" v-if = 'status =="no" '>登入狀態 : 未登入</span>
            <span class="status" v-if = 'status =="yes" '>登入狀態 : 已登入</span>
        </div>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon1">待辦事項</span>
            </div>
            <input type="text" class="form-control" placeholder="準備要做的任務" v-model="newTodo" @keyup.enter="addTodo">
            <div class="input-group-append">
                <button class="btn btn-primary" type="button" @click='addTodo'>新增</button>
            </div>
        </div>
        <div class="card text-center">
            <div class="card-header">
                <ul class="nav nav-tabs card-header-tabs">
                    <li class="nav-item">
                        <a class="nav-link" href="#" :class="{'active' : visibility == 'all'}"
                            @click='visibility="all"'>全部</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="#" :class="{'active' : visibility == 'active'}"
                            @click='visibility="active"'>進行中</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" :class="{'active' : visibility == 'completed'}"
                            @click='visibility="completed"'>已完成</a>
                    </li>
                </ul>
            </div>
            <ul class="list-group list-group-flush text-left" id='items'>
                <li class="list-group-item item py-3 px-3" :class="{'active' : item.star == 'star'}"
                    v-for="(item,key) in filterTodos" :key='item.id' @dblclick="editTodo(item)"
                    v-if='item.star ==="star"'>
                    <div class="d-flex" v-if="item.id !==cacheTodo.id">
                        <span class="material-icons pr-2 star" :class="{'active' : item.star == 'star'}"
                            @click='changeStar(item)'>{{item.star}}</span>
                        <div class="form-check">

                            <input type="checkbox" class="form-check-input" v-model="item.completed" :id="item.id">
                            <label class="form-check-label" :for="item.id" :class="{'completed' :item.completed}">
                                {{item.title}}
                            </label>
                        </div>
                        <button type="button" class="close ml-auto" aria-label="Close" @click="removeTodo(item)">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <input type="text" class="form-control" v-if="item.id ===cacheTodo.id" v-model="cacheTitle"
                        @keyup.esc="cancelEdit()" @keyup.enter="doneEdit(item)">
                </li>
                <li class="list-group-item item py-3 px-3" :class="{'active' : item.star == 'star'}"
                    v-for="(item,key) in filterTodos" :key='item.id' @dblclick="editTodo(item)"
                    v-if='item.star ==="star_border"'>
                    <div class="d-flex" v-if="item.id !==cacheTodo.id">
                        <span class="material-icons pr-2 star" :class="{'active' : item.star == 'star'}"
                            @click='changeStar(item)'>{{item.star}}</span>
                        <div class="form-check">

                            <input type="checkbox" class="form-check-input" v-model="item.completed" :id="item.id">
                            <label class="form-check-label" :for="item.id" :class="{'completed' :item.completed}">
                                {{item.title}}
                            </label>
                        </div>
                        <button type="button" class="close ml-auto" aria-label="Close" @click="removeTodo(item)">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <input type="text" class="form-control" v-if="item.id ===cacheTodo.id" v-model="cacheTitle"
                        @keyup.esc="cancelEdit()" @keyup.enter="doneEdit(item)">
                </li>
            </ul>
            <div class="card-footer d-flex justify-content-between">
                <span>還有 {{countTodos}} 筆任務未完成</span>
                <a href="#" @click.prevent="removeCompleted">清除已完成任務</a>
                <a href="#" @click.prevent="removeAll">清除所有任務</a>
            </div>
        </div>
    </div>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-firestore.js"></script>
    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyCsB_vy6WlXksxaJWYACRQvCCoUzi5sF7k",
            authDomain: "test-web-server-e5830.firebaseapp.com",
            databaseURL: "https://test-web-server-e5830-default-rtdb.firebaseio.com",
            projectId: "test-web-server-e5830",
            storageBucket: "test-web-server-e5830.appspot.com",
            messagingSenderId: "607826985914",
            appId: "1:607826985914:web:ae223728ed4b4ccd935383",
            measurementId: "G-XL9K3H5GF9"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="./all.js"></script>
</body>

</html>